<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Trading Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { padding: 20px; }
        .card { margin-bottom: 15px; }
        .positive { color: green; }
        .negative { color: red; }
        .api-status { float: right; }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="my-4">Trading Dashboard</h1>
        
        <!-- Gesamtübersicht -->
        <div class="row">
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header">Gesamtguthaben</div>
                    <div class="card-body">
                        <h3>${{ total_balance }}</h3>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header">Gesamt-PnL</div>
                    <div class="card-body">
                        <h3 class="{{ 'positive' if total_pnl|float >= 0 else 'negative' }}">
                            ${{ total_pnl }}
                        </h3>
                    </div>
                </div>
            </div>
        </div>

        <!-- Zeiträume -->
        <div class="row mt-3">
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header">1 Tag</div>
                    <div class="card-body">
                        {{ pnl_1d_str }} ({{ pnl_1d_percent }}%)
                    </div>
                </div>
            </div>
            <!-- Analog für 7d und 30d -->
        </div>

        <!-- Konten -->
        {% for acc in accounts %}
        <div class="card mt-3">
            <div class="card-header">
                {{ acc.name }}
                <span class="api-status {{ 'positive' if acc.status == 'OK' else 'negative' }}">
                    {{ acc.status }}
                </span>
            </div>
            <div class="card-body">
                <p>Guthaben: ${{ acc.balance }}</p>
                <p>PnL: 
                    <span class="{{ 'positive' if acc.pnl|float >= 0 else 'negative' }}">
                        ${{ acc.pnl }} ({{ acc.pnl_percent }}%)
                    </span>
                </p>
            </div>
        </div>
        {% endfor %}
    </div>

    <script>
        // Auto-Refresh alle 2 Minuten
        setTimeout(() => location.reload(), 120000);
    </script>
</body>
</html>
