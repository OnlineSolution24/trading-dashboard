<!DOCTYPE html>
<html>
<head>
  <title>Dashboard</title>
  <meta http-equiv="refresh" content="30">  <!-- Auto-Refresh alle 30 Sek. -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2>ðŸ“Š Trading Dashboard</h2>
    <a href="/logout" class="btn btn-danger">Abmelden</a>
  </div>

  <div class="card p-3 mb-3">
    <h4>ðŸ’° GesamtÃ¼bersicht</h4>
    <ul>
      <li><strong>Gesamtwert aller Subaccounts:</strong> {{ total_balance }} USDT</li>
      <li><strong>Startkapital:</strong> 12,237.37 USDT</li>
      <li><strong>Gewinn/Verlust:</strong>
        <span style="color: {% if profit_loss >= 0 %}green{% else %}red{% endif %};">
          {{ profit_loss | round(2) }} USDT
        </span>
      </li>
    </ul>
  </div>

  {% for account in subaccounts %}
    <div class="card mb-3 p-3">
      <h5>ðŸ“„ Account {{ account.name }}</h5>
      <p><strong>Guthaben:</strong> {{ account.balance }} USDT</p>

      <h6>Offene Positionen:</h6>
      <ul>
        {% for pos in account.positions %}
          <li style="color: {% if pos.pnl > 0 %}green{% elif pos.pnl < 0 %}red{% else %}black{% endif %};">
            {{ pos.symbol }} | GrÃ¶ÃŸe: {{ pos.size }} | PnL: {{ pos.pnl }}
          </li>
        {% endfor %}
      </ul>
    </div>
  {% endfor %}
</body>

</html>
